# SQL Injection Vulnerability Demo

This repository demonstrates a SQL injection vulnerability in a simple PHP application. The purpose of this demo is to educate developers about the dangers of SQL injection and how to prevent it.

## Description

This demo consists of a PHP script that interacts with a MySQL database to retrieve product information based on user input. The script includes an HTML form where users can input a product name, and the script constructs a SQL query using this input.

Due to improper handling of user input, the script is vulnerable to SQL injection attacks. A malicious user can manipulate the input to execute arbitrary SQL commands, potentially gaining access to sensitive data or compromising the database.

### Example Scenario

1. **Form Input**: The user enters `Product1` and submits the form.
   - **Constructed SQL Query**: `SELECT * FROM products WHERE name = 'Product1'`
   - **Result**: Displays the product with the name `Product1`.

2. **Form Input**: The user enters `' OR '1'='1` and submits the form.
   - **Constructed SQL Query**: `SELECT * FROM products WHERE name = '' OR '1'='1'`
   - **Result**: Displays all products in the database because the condition is always true.

## Cloning the Repository

To clone the repository, run the following command in your terminal:

```sh
git clone https://github.com/salmanfareeth/SQL-injection-vulnerability-demo.git
```

**Navigate to the Project Directory:**

```sh
cd SQL-injection-vulnerability-demo
```

## Requirements

To run this demo, you need to have the following installed:

**PHP:** A scripting language that runs on the server.

**MySQL:** A relational database management system.

**Web Server:** Apache or any other web server that supports PHP.


## Setting Up the Database

Create a MySQL database named `db_sqli`.

Use the following SQL commands to create the products table and insert sample data:

```sql

USE db_sqli;

DROP TABLE IF EXISTS products;

CREATE TABLE products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    price DECIMAL(10, 2) NOT NULL
);

INSERT INTO products (name, price) VALUES 
('Smartphone X', 799.99),
('Laptop Pro', 1299.99),
('Tablet S', 499.99),
('Smartwatch Z', 199.99),
('Wireless Earbuds', 149.99),
('4K TV', 999.99),
('Bluetooth Speaker', 79.99),
('Gaming Console', 399.99),
('Digital Camera', 599.99),
('Drone X', 899.99),
('Portable Charger', 39.99),
('Fitness Tracker', 129.99),
('Smart Home Hub', 99.99),
('VR Headset', 299.99),
('Smart Thermostat', 199.99),
('Robot Vacuum', 249.99),
('Wireless Mouse', 29.99),
('Mechanical Keyboard', 89.99),
('External Hard Drive', 59.99),
('Noise Cancelling Headphones', 249.99);

```

## Running the Demo

1.Ensure your web server is running.

2.Place the PHP script in your web server's root directory.

3.Open a web browser and navigate to `http://localhost/productsqli.php`

4.Use the form to search for products by name and observe the SQL injection vulnerability in action.

## Mitigation

To prevent SQL injection, always use prepared statements and parameterized queries. Modify the PHP script to use prepared statements as shown.

#### Prepared statements to prevent SQL Injection:

```php
$stmt = $conn->prepare("SELECT * FROM products WHERE name = ?");
    $stmt->bind_param("s", $productName);
    $stmt->execute();
    $result = $stmt->get_result();

    if ($result->num_rows > 0) {
        // Output data of each row
        while($row = $result->fetch_assoc()) {
            echo "id: " . $row["id"]. " - Name: " . $row["name"]. " - Price: " . $row["price"]. "<br>";
        }
    } else {
        echo "0 results";
    }
    $stmt->close();
```

## Further Reading

**For more information on SQL injection and how to prevent it, refer to the [OWASP SQL Injection Prevention Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html)**



## Disclaimer

**Warning:** This code is intended for demonstration and learning purposes only. Do not use this code in a production environment and it is maintained for educational purposes and to raise awareness about the importance of securing web applications against SQL injection attacks. Any damage or illegal usage resulting from this script is not my responsibility.
